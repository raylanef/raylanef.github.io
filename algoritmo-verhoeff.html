<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste</title>
</head>

<body>
    <button onclick="teste()">teste</button>

</body>
<script>
    const linha = [0, 1, 2, 3, 4, 5, 6, 7, 0, 1, 2];
    const tabelaLocalizacao = [
        [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
        [1, 5, 7, 6, 2, 8, 3, 0, 9, 4],
        [5, 8, 0, 3, 7, 9, 6, 1, 4, 2],
        [8, 9, 1, 6, 0, 4, 3, 5, 2, 7],
        [9, 4, 5, 3, 1, 2, 6, 8, 7, 0],
        [4, 2, 8, 6, 5, 7, 3, 9, 0, 1],
        [2, 7, 9, 3, 8, 0, 6, 4, 1, 5],
        [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]
    ];

    const tabelaIndiceInversao = [
        [0,1,2,3,4,5,6,7,8,9],
        [1,2,3,4,0,6,7,8,9,5],
        [2,3,4,0,1,7,8,9,5,6],
        [3,4,0,1,2,8,9,5,6,7],
        [4,0,1,2,3,9,5,6,7,8],
        [5,9,8,7,6,0,4,3,2,1],
        [6,5,9,8,7,1,0,4,3,2],
        [7,6,5,9,8,2,1,0,4,3],
        [8,7,6,5,9,3,2,1,0,4],
        [9,8,7,6,5,4,3,2,1,0]
    ];

    const digitoVerificador = [0,4,3,2,1,5,6,7,8,9];

    function teste() {
       // let contaCorrente = [2, 4, 6, 8, 0, 1, 9, 7, 5, 3];
        // let contaCorrente = [0,0,1,8,4,2,1,7,6,3,1]
        let contaCorrente = [0,0,1,7,1,4,9,1,4,7,5]
        let coluna = inverteArrayConta(contaCorrente);
        let iLocalizacao = indicesLocalizacao(linha, coluna, tabelaLocalizacao);

        let valorVerificacao = [0];
        let indiceVerificador = [0];

        for (i = 0; i < 10; i++) {
            valorVerificacao[i+1] = indiceVerificador[i];
            let col = iLocalizacao[i+1];
            let li = valorVerificacao[i+1];
            indiceVerificador[i+1] = tabelaIndiceInversao[li][col];
        }

        console.log(indiceVerificador);
        let indiceDigito = indiceVerificador[10];
        console.log("indice final: " + indiceDigito)
        let digito = digitoVerificador[indiceDigito];
        console.log("digito verificador: " + digito);


    }

    function inverteArrayConta(array) {
        let arrayInvertido = [];
        let index = 0;
        while (index < array.length) {
            arrayInvertido.push(array.pop());
        }
        arrayInvertido.unshift(0);
        return arrayInvertido;
    }

    function indicesLocalizacao(linha, coluna, tabelaLocalizacao) {
        let indices = [];
        for (i = 0; i < 11; i++) {
            let li = linha[i];
            let col = coluna[i];
            let indice = tabelaLocalizacao[li][col];
            indices.push(indice);
        }
        return indices;
    }

</script>

</html>